{"version":3,"sources":["webpack:///1.1fba316746c8e104da9f.chunk.js","webpack:///./src/app/filter.pipe.ts","webpack:///./src/app/video/index.ts","webpack:///./src/app/video/video-details-page.component.ts","webpack:///./src/app/video/video-details.component.ts","webpack:///./src/app/videos/index.ts","webpack:///./src/app/videos/video-card-item.component.ts","webpack:///./src/app/videos/video-card-list.component.ts","webpack:///./src/app/videos/video-card-loading.component.ts","webpack:///./src/app/videos/video-page.component.ts","webpack:///./src/app/videos/video-relation-item.component.ts","webpack:///./src/app/videos/video-relation-list.component.ts"],"names":["webpackJsonp","991","module","exports","__webpack_require__","core_1","HowlongPipe","prototype","transform","str","replace","__decorate","Pipe","name","__metadata","490","__export","m","p","hasOwnProperty","998","router_1","common_1","facebook_component_1","video_details_component_1","videos_1","video_service_1","VideoDetailsPageComponent","route","videoService","_this","this","data","subscribe","item","video","ngOnInit","Component","selector","template","directives","VideoDetailsComponent","VideoRelationListComponent","FacebookLikeComponent","CORE_DIRECTIVES","_a","ActivatedRoute","Object","_b","VideoService","999","ng2_meta_1","event_service_1","filter_pipe_1","user_service_1","video_directive_1","metaService","eventService","userService","router","isChecked","hasExist","kwid","keywords","findIndex","e","_id","applyKeyword","i","_i","length","all","gsub","emitter","com","action","checkFavorite","ngAfterViewInit","container","window","document","querySelector","scrollTop","manageKeyword","kw","updateVideoKeyword","ngOnDestroy","unsubscribe","currentUser","isFavorite","favorites","idx","arr","special","updateSpecial","isSpecial","v","emit","msg","updateStatus","status","updateVideoStatus","favorite","removeFavorite","save","error","addFavorite","ngOnChanges","changes","locationHref","location","href","setTitle","title","setTag","image","creator","Input","VideoDetails","pipes","GoTop","FacebookCommentComponent","FacebookShareComponent","ROUTER_DIRECTIVES","FacebookPlayerComponent","YoutubePlayerComponent","Html5PlayerComponent","MetaService","_c","_d","EventService","_e","UserService","_f","Router","487","_1","routes","path","component","VideoPageComponent","children","pathMatch","VideoCardListComponent","993","platform_browser_1","VideoCardItemComponent","sanitizer","url","bypassSecurityTrustUrl","VideoCard","host","[class.mdl-card]","[class.mdl-shadow--2dp]","[class.mdl-cell]","[class.mdl-cell--4-col]","[class.mdl-cell--4-col-tablet]","[class.mdl-cell--4-col-phone]","DomSanitizationService","994","video_card_item_component_1","video_card_loading_component_1","cmpResolver","isLoading","isInit","isLastAutoScroll","initPage","query","page","rows","componentHandler","upgradeDom","nextPage","sub","params","txtSearch","keywordId","mode","keyword","kwidx","setTimeout","init","qsub","routerState","queryParams","clearContent","self","fcDone","getMostVideos","videos","drawContent","drawError","getNewestVideos","getHotVideos","searchVideos","getKeywordVideos","err","console","viewContainer","clear","undefined","resolveComponent","then","factory","index","createComponent","injector","instance","ViewChild","read","ViewContainerRef","styles","VideoCardLoadingComponent","ComponentResolver","995","996","video_relation_list_component_1","user_favorite_video_component_1","UserFavoriteVideoComponent","997","VideoRelationItemComponent","992","video_relation_item_component_1","videosRelation","getRelateVideos","id","updateat","String","Number"],"mappings":"AAAAA,cAAc,EAAE,IAEVC,IACA,SAASC,EAAQC,EAASC,GAE/B,YCLD,IAAAC,GAAAD,EAAkC,GAMlCE,EAAA,mBAAAA,MAQA,MALEA,GAAAC,UAAAC,UAAA,SAAUC,GACT,MAAIA,GACIA,EAAIC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAD7CD,GAPnBH,EAAAK,YAACN,EAAAO,MACCC,KAAM,gBDiBCC,WAAW,yBACZR,KChBKH,GAAAG,YAAWA,GDwBlBS,IACA,SAASb,EAAQC,EAASC,GAE/B,YACA,SAASY,GAASC,GACd,IAAK,GAAIC,KAAKD,GAAQd,EAAQgB,eAAeD,KAAIf,EAAQe,GAAKD,EAAEC,IEnCrEF,EAAAZ,EAAc,OF0CRgB,IACA,SAASlB,EAAQC,EAASC,GAE/B,YG7CD,IAAAC,GAAAD,EAA6C,GAC7CiB,EAAAjB,EAA+B,IAC/BkB,EAAAlB,EAAgC,IAEhCmB,EAAAnB,EAAsC,KACtCoB,EAAApB,EAAsC,KACtCqB,EAAArB,EAA2C,KAC3CsB,EAAAtB,EAA2C,IAc3CuB,EAAA,WAGE,QAAAA,GAAoBC,EAA+BC,GAHrD,GAAAC,GAAAC,IAGsBA,MAAAH,QAA+BG,KAAAF,eACjDE,KAAKH,MAAMI,KAAKC,UAAU,SAACD,GACzBF,EAAKI,KAAOF,EAAKG,QASvB,MALER,GAAApB,UAAA6B,SAAA,aArBFT,EAAAhB,YAACN,EAAAgC,WACGC,SAAU,qBACVC,SAAU,mnBAQVC,YAAahB,EAAAiB,sBAAuBhB,EAAAiB,2BAA4BnB,EAAAoB,sBAAuBrB,EAAAsB,mBHmDlF9B,WAAW,qBAAmH,mBAApF+B,EAAwC,mBAA5BxB,GAASyB,gBAAkCzB,EAASyB,iBAAkCD,GAAOE,OAA+G,mBAA9FC,EAA6C,mBAAjCtB,GAAgBuB,cAAgCvB,EAAgBuB,eAAgCD,GAAOD,UACxRpB,EAEH,IAAIkB,GAAIG,IGpDA7C,GAAAwB,0BAAyBA,GH2DhCuB,IACA,SAAShD,EAAQC,EAASC,GAE/B,YInFD,IAAAC,GAAAD,EAA4F,GAC5FiB,EAAAjB,EAA0C,IAC1C+C,EAAA/C,EAA4B,KAE5BsB,EAAAtB,EAA2C,IAC3CgD,EAAAhD,EAA6B,IAC7BiD,EAAAjD,EAA4B,KAC5BkD,EAAAlD,EAA4B,IAC5BmD,EAAAnD,EAAsB,KACtBmB,EAAAnB,EAAwI,KA2DxIqC,EAAA,WASE,QAAAA,GAAoBe,EAAkC3B,EAAoC4B,EAAoCC,EAAkCC,GAA5I5B,KAAAyB,cAAkCzB,KAAAF,eAAoCE,KAAA0B,eAAoC1B,KAAA2B,cAAkC3B,KAAA4B,SAHhK5B,KAAA6B,WAAoB,EAoHtB,MA7GEnB,GAAAlC,UAAAsD,SAAA,SAASC,GACP,MAAO/B,MAAKG,KAAK6B,SAASC,UAAU,SAACC,GACnC,MAAOA,GAAEC,MAAQJ,UAIrBrB,EAAAlC,UAAA4D,aAAA,WACE,IAAI,GAAIC,KAAKrC,MAAKG,KAAK6B,SACrB,IAAe,GAAAM,GAAA,EAAAxB,EAAAd,KAAKF,aAAakC,SAAlBM,EAAAxB,EAAAyB,OAAAD,IAA2B,CAAtC,GAAIE,GAAG1B,EAAAwB,EACNtC,MAAKG,KAAK6B,SAASK,YAAcrB,SACjChB,KAAKG,KAAK6B,SAASK,KAAOG,EAAIL,MAC/BnC,KAAKG,KAAK6B,SAASK,GAAKG,KAMhC9B,EAAAlC,UAAA6B,SAAA,cAAAN,GAAAC,IACEA,MAAKoC,eACLpC,KAAKyC,KAAOzC,KAAK0B,aAAagB,QAAQxC,UAAU,SAACD,GAC/B,aAAbA,EAAK0C,KACa,UAAhB1C,EAAK2C,QACH3C,EAAKA,MACNF,EAAK8C,mBAOfnC,EAAAlC,UAAAsE,gBAAA,WACE9C,KAAK+C,UAAYC,OAAOC,SAASC,cAAc,mBAC/ClD,KAAK+C,UAAUI,UAAY,IAG7BzC,EAAAlC,UAAA4E,cAAA,SAAcC,GAAd,GAAAtD,GAAAC,IACEA,MAAKF,aAAawD,mBAAmBtD,KAAKG,KAAKgC,IAAKkB,EAAGlB,KAAKjC,UAAU,SAACmD,GACrEtD,EAAKI,KAAK6B,SAAWqB,EACrBtD,EAAKqC,kBAIT1B,EAAAlC,UAAA+E,YAAA,WACEvD,KAAKyC,KAAKe,eAGZ9C,EAAAlC,UAAAqE,cAAA,cAAA9C,GAAAC,IACMA,MAAK2B,YAAY8B,cACrBzD,KAAK6B,WAAY,EACjB7B,KAAK0D,WAAa1D,KAAK2B,YAAY8B,YAAYE,UAAU1B,UAAU,SAACC,EAAG0B,EAAKC,GAC1E,MAAG3B,GAAEC,MAAQpC,EAAKI,KAAKgC,YAK3BzB,EAAAlC,UAAAsF,QAAA,cAAA/D,GAAAC,IACEA,MAAKF,aAAaiE,cAAc/D,KAAKG,KAAKgC,KAAMnC,KAAKG,KAAK6D,WAAW9D,UAAU,SAAC+D,GAC9ElE,EAAKI,KAAK6D,UAAYC,EACtBlE,EAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAKF,EAAI,iCAAmC,sCAI1FvD,EAAAlC,UAAA4F,aAAA,cAAArE,GAAAC,IAC0B,KAArBA,KAAKG,KAAKkE,QACbrE,KAAKF,aAAawE,kBAAkBtE,KAAKG,KAAKgC,IAAKnC,KAAKG,KAAKkE,WAAWnE,UAAU,SAAC+D,GACjFlE,EAAKI,KAAKkE,OAASJ,EACnBlE,EAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAU,GAALF,EAAS,yBAA0B,sBAItFvD,EAAAlC,UAAA+F,SAAA,cAAAxE,GAAAC,IACMA,MAAK0D,WAaP1D,KAAKF,aAAa0E,eAAexE,KAAKG,KAAKgC,KAAKjC,UAC/C,SAAC+D,GACElE,EAAK4B,YAAY8B,YAAYE,UAAYM,EACzClE,EAAK4B,YAAY8C,OACjB1E,EAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAK,qCAElD,SAAAO,GAAU,MAAA3E,GAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAK,mCAlB1DnE,KAAKF,aAAa6E,YAAY3E,KAAKG,MAAMD,UACxC,SAAC+D,GACKA,EAAE1B,OAAS,GACZxC,EAAK4B,YAAY8B,YAAYE,UAAYM,EACzClE,EAAK4B,YAAY8C,OACjB1E,EAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAK,qCAE/CpE,EAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAK,kCAGpD,SAAAO,GAAU,MAAA3E,GAAK2B,aAAawC,MAAMvB,IAAK,YAAawB,IAAK,mCAU5DnE,KAAK0D,YAAc1D,KAAK0D,YAG1BhD,EAAAlC,UAAAoG,YAAA,SAAYC,GACV7E,KAAK8E,aAAeC,SAASC,KAE7BhF,KAAKyB,YAAYwD,SAASjF,KAAKG,KAAK+E,OACpClF,KAAKyB,YAAY0D,OAAO,UAAW,eACnCnF,KAAKyB,YAAY0D,OAAO,SAAUJ,SAASC,MAC3ChF,KAAKyB,YAAY0D,OAAO,WAAWnF,KAAKG,KAAKiF,OAC7CpF,KAAKyB,YAAY0D,OAAO,eAAgBnF,KAAKG,KAAKkF,SAElDrF,KAAKoC,eACLpC,KAAK6C,gBACL7C,KAAK6B,WAAY,EACd7B,KAAK+C,YAAW/C,KAAK+C,UAAUI,UAAY,KAvHhDvE,YAACN,EAAAgH,QJ8IMvG,WAAW,cAAsH,mBAA9F+B,EAA6C,mBAAjCnB,GAAgB4F,cAAgC5F,EAAgB4F,eAAgCzE,GAAOE,SACvJN,EAAsBlC,UAAW,OAAQ,QIrMjDkC,EAAA9B,YAACN,EAAAgC,WACGC,SAAU,gBACVC,SAAU,glHAgDVgF,OAAQlE,EAAA/C,aACRkC,YAAae,EAAAiE,MAAOjG,EAAAkG,yBAA0BlG,EAAAmG,uBAAwBrG,EAAAsG,kBAAmBpG,EAAAqG,wBAAyBrG,EAAAsG,uBAAwBtG,EAAAuG,wBJ0JrIhH,WAAW,qBAAiH,mBAAlFkC,EAAuC,mBAA3BG,GAAW4E,aAA+B5E,EAAW4E,cAA+B/E,GAAOD,OAA+G,mBAA9FiF,EAA6C,mBAAjCtG,GAAgBuB,cAAgCvB,EAAgBuB,eAAgC+E,GAAOjF,OAA+G,mBAA9FkF,EAA6C,mBAAjC7E,GAAgB8E,cAAgC9E,EAAgB8E,eAAgCD,GAAOlF,OAA2G,mBAA1FoF,EAA2C,mBAA/B7E,GAAe8E,aAA+B9E,EAAe8E,cAA+BD,GAAOpF,OAAqF,mBAApEsF,EAAgC,mBAApBhH,GAASiH,QAA0BjH,EAASiH,SAA0BD,GAAOtF,UACpoBN,EAEH,IAAII,GAAIG,EAAIgF,EAAIC,EAAIE,EAAIE,II3JhBlI,GAAAsC,sBAAqBA,GJkK5B8F,IACA,SAASrI,EAAQC,EAASC,GAE/B,YACA,SAASY,GAASC,GACd,IAAK,GAAIC,KAAKD,GAAQd,EAAQgB,eAAeD,KAAIf,EAAQe,GAAKD,EAAEC,IK3OrEF,EAAAZ,EAAc,MACdY,EAAAZ,EAAc,MACdY,EAAAZ,EAAc,KAEd,IAAAoI,GAAApI,EAA2D,IAE9CD,GAAAsI,QAAWC,KAAM,GAAIC,UAAWH,EAAAI,mBAC3CC,WACIH,KAAM,GAAuBI,UAAW,OAAYH,UAAWH,EAAAO,yBAC/DL,KAAM,QAAuBI,UAAW,OAAYH,UAAWH,EAAAO,yBAC/DL,KAAM,qBAAuBI,UAAW,OAAYH,UAAWH,EAAAO,yBAC/DL,KAAM,oBAAuBI,UAAW,OAAYH,UAAWH,EAAAO,2BLkP/DC,IACA,SAAS9I,EAAQC,EAASC,GAE/B,YMhQD,IAAAC,GAAAD,EAAyC,GACzCiB,EAAAjB,EAAkC,IAClC6I,EAAA7I,EAAwD,IAExDsB,EAAAtB,EAA0B,IAC1BiD,EAAAjD,EAA4B,KA+B5B8I,EAAA,WAIE,QAAAA,GAAoBC,GAAApH,KAAAoH,YAOtB,MAHED,GAAA3I,UAAA6B,SAAA,WACEL,KAAKqH,IAAMrH,KAAKoH,UAAUE,uBAAuBtH,KAAKG,KAAKiF,QAR7DxG,YAACN,EAAAgH,QN0OMvG,WAAW,cAAgH,mBAAxF+B,EAA0C,mBAA9BnB,GAAgB4H,WAA6B5H,EAAgB4H,YAA6BzG,GAAOE,SACjJmG,EAAuB3I,UAAW,OAAQ,QMzQlD2I,EAAAvI,YAACN,EAAAgC,WACGC,SAAU,kBACVC,SAAU,yjCAgBVgH,MACEC,mBAAoB,OACpBC,0BAA2B,OAC3BC,mBAAoB,OACpBC,0BAA2B,OAC3BC,iCAAkC,OAClCC,gCAAiC,QAEnCtC,OAAQlE,EAAA/C,aACRkC,YAAanB,EAAAsG,qBN8PR7G,WAAW,qBAAuJ,mBAAxHkC,EAA0D,mBAA9CiG,GAAmBa,wBAA0Cb,EAAmBa,yBAA0C9G,GAAOD,UACxLmG,EAEH,IAAIrG,GAAIG,IM/PA7C,GAAA+I,uBAAsBA,GNsQ7Ba,IACA,SAAS7J,EAAQC,EAASC,GAE/B,YO7SD,IAAAC,GAAAD,EAA4K,GAC5KiB,EAAAjB,EAA0D,IAC1D+C,EAAA/C,EAA4B,KAE5BgD,EAAAhD,EAA6B,IAC7BsB,EAAAtB,EAAwC,IACxCmD,EAAAnD,EAAsB,KACtB4J,EAAA5J,EAAuC,KACvC6J,EAAA7J,EAA0C,KA0B1C2I,EAAA,WAgBI,QAAAA,GAAoBvF,EAAkCG,EAAwB/B,EAA+BC,EAAoC4B,EAAoCyG,GAAjKnI,KAAAyB,cAAkCzB,KAAA4B,SAAwB5B,KAAAH,QAA+BG,KAAAF,eAAoCE,KAAA0B,eAAoC1B,KAAAmI,cAfrLnI,KAAAoI,WAAqB,EACrBpI,KAAAqI,QAAkB,EAIlBrI,KAAAsI,kBAA4B,EAC5BtI,KAAAuI,SAAkB,EAElBvI,KAAAwI,SACAxI,KAAAyI,KAAe,EACfzI,KAAA0I,KAAe,GAwInB,MA/HI1B,GAAAxI,UAAAsE,gBAAA,WACE6F,iBAAiBC,cAGnB5B,EAAAxI,UAAAoG,YAAA,SAAYC,GAAZ,GAAA9E,GAAAC,IACEA,MAAK6I,SAAS7I,KAAM,WAClBD,EAAK2B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,cAI5DoE,EAAAxI,UAAA6B,SAAA,cAAAN,GAAAC,IACEA,MAAKyC,KAAOzC,KAAK0B,aAAagB,QAAQxC,UAAU,SAACD,GAC/B,oBAAbA,EAAK0C,KACa,WAAhB1C,EAAK2C,SACN7C,EAAK0I,OACL1I,EAAK8I,SAAS9I,EAAM,WAElB,GADAA,EAAK2B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,WACrD7C,EAAK0I,KAAO1I,EAAKwI,WAAaxI,EAAK0I,KAAO1I,EAAKwI,UAAY,IAAM,EAElE,MADAxI,GAAKuI,kBAAmB,EACjBvI,EAAK2B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,cAMzE5C,KAAK8I,IAAM9I,KAAKH,MAAMkJ,OAAO7I,UAAU,SAAC6I,GACtC,GAEI7D,GAFA8D,EAAoBD,EAAkB,UACtCE,EAAqBF,EAAW,EAEpC,IAAGC,EACDjJ,EAAKmJ,KAAO,SACZnJ,EAAKyI,MAAMQ,UAAYA,EACvB9D,EAAQ8D,EAAY,UAChB,IAAGC,EAAU,CACjBlJ,EAAKmJ,KAAO,UACZnJ,EAAKyI,MAAMW,QAAUF,CACrB,IAAIG,GAAQrJ,EAAKD,aAAakC,SAASC,UAAU,SAACC,GAAO,MAAOA,GAAEC,MAAQ8G,GAC1E/D,GAAQkE,EAAQ,EAAIH,EAAYlJ,EAAKD,aAAakC,SAASoH,GAAOtK,SAElEiB,GAAKmJ,KAAOH,EAAa,MAAK,SACb,SAAdhJ,EAAKmJ,KACNhE,EAAQ,sBACa,QAAdnF,EAAKmJ,OACZhE,EAAQ,gBAGTA,IAAOmE,WAAW,WAAQtJ,EAAK0B,YAAYwD,SAASC,KACvDnF,EAAKuJ,SAEPtJ,KAAKuJ,KAAOvJ,KAAK4B,OAAO4H,YAAYC,YAAYvJ,UAAU,SAAC6I,GACzDhJ,EAAKwI,UAAYQ,EAAON,MAAQ,EAChC1I,EAAK0I,KAAO1I,EAAKwI,SACjBxI,EAAKuI,kBAAmB,EACxBvI,EAAKuJ,UAITtC,EAAAxI,UAAA8K,KAAA,cAAAvJ,GAAAC,IACKA,MAAKqI,SACRrI,KAAKqI,QAAS,EACdgB,WAAW,WACTtJ,EAAK2J,aAAa3J,GAClBA,EAAK2B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,UACxD7C,EAAK8I,SAAS9I,EAAM,WAClBA,EAAKsI,QAAS,EACdtI,EAAK2B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,cAEzD,OAGLoE,EAAAxI,UAAA+E,YAAA,WACEvD,KAAKyC,KAAKe,cACVxD,KAAKuJ,KAAK/F,cACVxD,KAAK8I,IAAItF,eAGXwD,EAAAxI,UAAAqK,SAAA,SAASc,EAA6BC,GACpCD,EAAKvB,WAAY,EACjBuB,EAAKjI,aAAawC,MAAMvB,IAAK,eAAgBC,OAAQ,IACpC,SAAd+G,EAAKT,KACNS,EAAK7J,aAAa+J,eAAepB,KAAMkB,EAAKlB,KAAMC,KAAMiB,EAAKjB,OAAOxI,UAAU,SAAC4J,GAC7EH,EAAKI,YAAYJ,EAAMG,EAAQF,IAC9BD,EAAKK,WACa,WAAdL,EAAKT,KACZS,EAAK7J,aAAamK,iBAAiBxB,KAAMkB,EAAKlB,KAAMC,KAAMiB,EAAKjB,OAAOxI,UAAU,SAAC4J,GAC/EH,EAAKI,YAAYJ,EAAMG,EAAQF,IAC9BD,EAAKK,WACa,QAAdL,EAAKT,KACZS,EAAK7J,aAAaoK,cAAczB,KAAMkB,EAAKlB,KAAMC,KAAMiB,EAAKjB,OAAOxI,UAAU,SAAC4J,GAC5EH,EAAKI,YAAYJ,EAAMG,EAAQF,IAC9BD,EAAKK,WACa,WAAdL,EAAKT,KACZS,EAAK7J,aAAaqK,aAAaR,EAAKnB,MAAMQ,WAAYP,KAAMkB,EAAKlB,KAAMC,KAAMiB,EAAKjB,OAAOxI,UAAU,SAAC4J,GAClGH,EAAKI,YAAYJ,EAAMG,EAAQF,IAC9BD,EAAKK,WACa,YAAdL,EAAKT,MACZS,EAAK7J,aAAasK,iBAAiBT,EAAKnB,MAAMW,SAAUV,KAAMkB,EAAKlB,KAAMC,KAAMiB,EAAKjB,OAAOxI,UAAU,SAAC4J,GACpGH,EAAKI,YAAYJ,EAAMG,EAAQF,IAC9BD,EAAKK,YAIZhD,EAAAxI,UAAAwL,UAAA,SAAUK,GACRC,QAAQ5F,MAAM2F,IAGhBrD,EAAAxI,UAAAkL,aAAA,SAAaC,GACXA,EAAKY,cAAcC,SAGrBxD,EAAAxI,UAAAuL,YAAA,SAAYJ,EAA8BG,EAA0BF,GAClE,MAAqB,KAAlBE,EAAOvH,QACRvC,KAAKoI,UAAYqC,OACVb,SAETD,GAAKxB,YAAYuC,iBAAiBzC,EAAAd,wBACjCwD,KAAK,SAACC,GACL,GAAIC,GAAQlB,EAAKY,cAAchI,MAC/B,KAAI,GAAIF,KAAKyH,GAAO,CAClB,GAAInH,GAA4CgH,EAAKY,cAAcO,gBAAgBF,EAASC,IAASlB,EAAKY,cAAcQ,SACxHpI,GAAIqI,SAAS7K,KAAO2J,EAAOzH,GAE7BsH,EAAKvB,WAAY,EACjBuB,EAAKjI,aAAawC,MAAMvB,IAAK,eAAgBC,OAAQ,IACrDgH,OAnIJhL,YAACN,EAAA2M,UAAU,iBAAkBC,KAAM5M,EAAA6M,mBP4Z9BpM,WAAW,cAAeiC,SAC3BgG,EAAuBxI,UAAW,gBAAiB,QOhc3DwI,EAAApI,YAACN,EAAAgC,WACGC,SAAU,kBACVC,SAAU,smBAYV4K,QACE,uDACA,oCACA,2CACA,4CAEF3K,YAAawH,EAAAd,uBAAwBe,EAAAmD,0BAA2B/L,EAAAsG,kBAAmBpE,EAAAiE,SPyb9E1G,WAAW,qBAAiH,mBAAlF+B,EAAuC,mBAA3BM,GAAW4E,aAA+B5E,EAAW4E,cAA+BlF,GAAOE,OAAqF,mBAApEC,EAAgC,mBAApB3B,GAASiH,QAA0BjH,EAASiH,SAA0BtF,GAAOD,OAAqG,mBAApFiF,EAAwC,mBAA5B3G,GAASyB,gBAAkCzB,EAASyB,iBAAkCkF,GAAOjF,OAA+G,mBAA9FkF,EAA6C,mBAAjCvG,GAAgBuB,cAAgCvB,EAAgBuB,eAAgCgF,GAAOlF,OAA+G,mBAA9FoF,EAA6C,mBAAjC/E,GAAgB8E,cAAgC9E,EAAgB8E,eAAgCC,GAAOpF,OAAuG,mBAAtFsF,EAAyC,mBAA7BhI,GAAOgN,mBAAqChN,EAAOgN,oBAAqChF,GAAOtF,UAC1vBgG,EAEH,IAAIlG,GAAIG,EAAIgF,EAAIC,EAAIE,EAAIE,IO1bhBlI,GAAA4I,uBAAsBA,GPic7BuE,IACA,SAASpN,EAAQC,EAASC,GAE/B,YQteD,IAAAC,GAAAD,EAA0B,GAe1BgN,EAAA,mBAAAA,MACA,MAdAA,GAAAzM,YAACN,EAAAgC,WACGC,SAAU,qBACVC,SAAU,oEAGVgH,MACEC,mBAAoB,OACpBE,mBAAoB,OACpBC,0BAA2B,OAC3BC,iCAAkC,OAClCC,gCAAiC,UR2e9B/I,WAAW,yBACZsM,KQzeKjN,GAAAiN,0BAAyBA,GRifhCG,IACA,SAASrN,EAAQC,EAASC,GAE/B,YSngBD,IAAAC,GAAAD,EAA6C,GAC7CkB,EAAAlB,EAAgC,IAChCiB,EAAAjB,EAA0D,IAE1DoN,EAAApN,EAA2C,KAC3CmB,EAAAnB,EAAsC,KACtCqN,EAAArN,EAA2C,KAC3CgD,EAAAhD,EAA6B,IA2B7BwI,EAAA,WAEE,QAAAA,GAAoBnF,GAAA1B,KAAA0B,eAatB,MATEmF,GAAArI,UAAA6B,SAAA,aAIAwG,EAAArI,UAAA+E,YAAA,WACEvD,KAAK0B,aAAawC,MAAMvB,IAAK,kBAAmBC,OAAQ,UApC5DiE,EAAAjI,YAACN,EAAAgC,WACGC,SAAU,aACVC,SAAU,81BAqBVC,YAAagL,EAAA9K,2BAA4BnB,EAAAoB,sBAAuBrB,EAAAsB,gBAAiBvB,EAAAsG,kBAAmB8F,EAAAC,8BT0f/F5M,WAAW,qBAA6H,mBAA9F+B,EAA6C,mBAAjCO,GAAgB8E,cAAgC9E,EAAgB8E,eAAgCrF,GAAOE,UAC9J6F,EAEH,IAAI/F,KS3fI1C,GAAAyI,mBAAkBA,GTkgBzB+E,IACA,SAASzN,EAAQC,EAASC,GAE/B,YUviBD,IAAAC,GAAAD,EAAiC,GACjCiB,EAAAjB,EAAkC,IAElCsB,EAAAtB,EAA0B,IAC1BiD,EAAAjD,EAA4B,KAsB5BwN,EAAA,mBAAAA,MAEA,MADEjN,aAACN,EAAAgH,QVshBMvG,WAAW,cAAgH,mBAAxF+B,EAA0C,mBAA9BnB,GAAgB4H,WAA6B5H,EAAgB4H,YAA6BzG,GAAOE,SACjJ6K,EAA2BrN,UAAW,OAAQ,QU5iBtDqN,EAAAjN,YAACN,EAAAgC,WACGC,SAAU,sBACVC,SAAU,42BAeVgF,OAAQlE,EAAA/C,aACRkC,YAAanB,EAAAsG,qBVkiBR7G,WAAW,yBACZ8M,EAEH,IAAI/K,KUniBI1C,GAAAyN,2BAA0BA,GV0iBjCC,IACA,SAAS3N,EAAQC,EAASC,GAE/B,YWvkBD,IAAAC,GAAAD,EAAkE,GAElEsB,EAAAtB,EAAwC,IACxC0N,EAAA1N,EAA2C,KAkB3CsC,EAAA,WASE,QAAAA,GAAoBb,GAAAE,KAAAF,eALXE,KAAAwI,SAGTxI,KAAAgM,kBA4BF,MAtBErL,GAAAnC,UAAAoG,YAAA,SAAYC,GAAZ,GAAA9E,GAAAC,IACmB,cAAdA,KAAKkJ,OACNlJ,KAAKkF,MAAQ,kBACblF,KAAKF,aAAamM,gBAAgBjM,KAAKwI,MAAM0D,GAAIlM,KAAKwI,MAAMxG,SAAUhC,KAAKwI,MAAM2D,UAAW1D,KAAMzI,KAAKyI,KAAMC,KAAM1I,KAAK0I,OAAOxI,UAC9G,SAAC4J,GAA8B/J,EAAKiM,eAAiBlC,GACrD,SAAApF,GAAU,MAAA4F,SAAQ5F,MAAMA,OAI7C/D,EAAAnC,UAAA6B,SAAA,cAAAN,GAAAC,IACmB,UAAdA,KAAKkJ,MACNlJ,KAAKkF,MAAQ,uBACblF,KAAKF,aAAa+J,eAAepB,KAAMzI,KAAKyI,KAAMC,KAAM1I,KAAK0I,OAAOxI,UACnD,SAAC4J,GAA8B/J,EAAKiM,eAAiBlC,GACrD,SAAApF,GAAU,MAAA4F,SAAQ5F,MAAMA,MACpB,QAAd1E,KAAKkJ,OACZlJ,KAAKkF,MAAQ,YACblF,KAAKF,aAAaoK,cAAczB,KAAMzI,KAAKyI,KAAMC,KAAM1I,KAAK0I,OAAOxI,UAClD,SAAC4J,GAA8B/J,EAAKiM,eAAiBlC,GACrD,SAAApF,GAAU,MAAA4F,SAAQ5F,MAAMA,OA/B7C9F,YAACN,EAAAgH,QX+kBMvG,WAAW,cAAeqN,SAC3BzL,EAA2BnC,UAAW,OAAQ,QW/kBpDI,YAACN,EAAAgH,QXklBMvG,WAAW,cAAesN,SAC3B1L,EAA2BnC,UAAW,OAAQ,QWllBpDI,YAACN,EAAAgH,QXqlBMvG,WAAW,cAAesN,SAC3B1L,EAA2BnC,UAAW,OAAQ,QWrlBpDI,YAACN,EAAAgH,QXwlBMvG,WAAW,cAAeiC,SAC3BL,EAA2BnC,UAAW,QAAS,QW7mBvDmC,EAAA/B,YAACN,EAAAgC,WACGC,SAAU,sBACVC,SAAU,oeAYVC,YAAasL,EAAAF,8BXsmBR9M,WAAW,qBAA6H,mBAA9F+B,EAA6C,mBAAjCnB,GAAgBuB,cAAgCvB,EAAgBuB,eAAgCJ,GAAOE,UAC9JL,EAEH,IAAIG,KWvmBI1C,GAAAuC,2BAA0BA","file":"1.1fba316746c8e104da9f.chunk.js","sourcesContent":["webpackJsonp([1,2],{\n\n/***/ 991:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\t// Tell Angular2 we're creating a Pipe with TypeScript decorators\r\n\tvar HowlongPipe = (function () {\r\n\t    function HowlongPipe() {\r\n\t    }\r\n\t    // Transform is the new \"return function(value, args)\" in Angular 1.x\r\n\t    HowlongPipe.prototype.transform = function (str) {\r\n\t        if (!str)\r\n\t            return str;\r\n\t        return str.replace('H', 'g').replace('M', 'p').replace('S', '\"');\r\n\t    };\r\n\t    HowlongPipe = __decorate([\r\n\t        core_1.Pipe({\r\n\t            name: 'HowlongPipe'\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [])\r\n\t    ], HowlongPipe);\r\n\t    return HowlongPipe;\r\n\t}());\r\n\texports.HowlongPipe = HowlongPipe;\r\n\n\n/***/ },\n\n/***/ 490:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tfunction __export(m) {\r\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n\t}\r\n\t__export(__webpack_require__(998));\r\n\n\n/***/ },\n\n/***/ 998:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar common_1 = __webpack_require__(34);\r\n\tvar facebook_component_1 = __webpack_require__(305);\r\n\tvar video_details_component_1 = __webpack_require__(999);\r\n\tvar videos_1 = __webpack_require__(487);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar VideoDetailsPageComponent = (function () {\r\n\t    function VideoDetailsPageComponent(route, videoService) {\r\n\t        var _this = this;\r\n\t        this.route = route;\r\n\t        this.videoService = videoService;\r\n\t        this.route.data.subscribe(function (data) {\r\n\t            _this.item = data.video;\r\n\t        });\r\n\t    }\r\n\t    VideoDetailsPageComponent.prototype.ngOnInit = function () {\r\n\t    };\r\n\t    VideoDetailsPageComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-details-page',\r\n\t            template: \"\\n      <div class=\\\"mdl-grid\\\" *ngIf=\\\"item\\\">\\n        <video-details [item] = \\\"item\\\" class=\\\"mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\\\"></video-details>\\n        <div                       class=\\\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\\\">\\n          <video-relation-list [query]=\\\"{keywords: item.keywords, id: item._id, updateat: item.updateat}\\\" [mode]=\\\"'relation'\\\" [page]=\\\"1\\\" [rows]=\\\"10\\\" class=\\\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\\\"></video-relation-list>\\n        </div>\\n      </div>\\n    \",\r\n\t            directives: [video_details_component_1.VideoDetailsComponent, videos_1.VideoRelationListComponent, facebook_component_1.FacebookLikeComponent, common_1.CORE_DIRECTIVES]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_a = typeof router_1.ActivatedRoute !== 'undefined' && router_1.ActivatedRoute) === 'function' && _a) || Object, (typeof (_b = typeof video_service_1.VideoService !== 'undefined' && video_service_1.VideoService) === 'function' && _b) || Object])\r\n\t    ], VideoDetailsPageComponent);\r\n\t    return VideoDetailsPageComponent;\r\n\t    var _a, _b;\r\n\t}());\r\n\texports.VideoDetailsPageComponent = VideoDetailsPageComponent;\r\n\n\n/***/ },\n\n/***/ 999:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar ng2_meta_1 = __webpack_require__(488);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar event_service_1 = __webpack_require__(50);\r\n\tvar filter_pipe_1 = __webpack_require__(991);\r\n\tvar user_service_1 = __webpack_require__(67);\r\n\tvar video_directive_1 = __webpack_require__(306);\r\n\tvar facebook_component_1 = __webpack_require__(305);\r\n\tvar VideoDetailsComponent = (function () {\r\n\t    function VideoDetailsComponent(metaService, videoService, eventService, userService, router) {\r\n\t        this.metaService = metaService;\r\n\t        this.videoService = videoService;\r\n\t        this.eventService = eventService;\r\n\t        this.userService = userService;\r\n\t        this.router = router;\r\n\t        this.isChecked = false;\r\n\t    }\r\n\t    VideoDetailsComponent.prototype.hasExist = function (kwid) {\r\n\t        return this.item.keywords.findIndex(function (e) {\r\n\t            return e._id === kwid;\r\n\t        }) !== -1;\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.applyKeyword = function () {\r\n\t        for (var i in this.item.keywords) {\r\n\t            for (var _i = 0, _a = this.videoService.keywords; _i < _a.length; _i++) {\r\n\t                var all = _a[_i];\r\n\t                if (this.item.keywords[i] instanceof Object)\r\n\t                    continue;\r\n\t                if (this.item.keywords[i] === all._id) {\r\n\t                    this.item.keywords[i] = all;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        this.applyKeyword();\r\n\t        this.gsub = this.eventService.emitter.subscribe(function (data) {\r\n\t            if (data.com === 'facebook') {\r\n\t                if (data.action === 'login') {\r\n\t                    if (data.data) {\r\n\t                        _this.checkFavorite();\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.ngAfterViewInit = function () {\r\n\t        this.container = window.document.querySelector('[scroll-bottom]');\r\n\t        this.container.scrollTop = 48;\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.manageKeyword = function (kw) {\r\n\t        var _this = this;\r\n\t        this.videoService.updateVideoKeyword(this.item._id, kw._id).subscribe(function (kw) {\r\n\t            _this.item.keywords = kw;\r\n\t            _this.applyKeyword();\r\n\t        });\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.ngOnDestroy = function () {\r\n\t        this.gsub.unsubscribe();\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.checkFavorite = function () {\r\n\t        var _this = this;\r\n\t        if (!this.userService.currentUser)\r\n\t            return;\r\n\t        this.isChecked = true;\r\n\t        this.isFavorite = this.userService.currentUser.favorites.findIndex(function (e, idx, arr) {\r\n\t            if (e._id === _this.item._id)\r\n\t                return true;\r\n\t            return false;\r\n\t        }) != -1;\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.special = function () {\r\n\t        var _this = this;\r\n\t        this.videoService.updateSpecial(this.item._id, !this.item.isSpecial).subscribe(function (v) {\r\n\t            _this.item.isSpecial = v;\r\n\t            _this.eventService.emit({ com: 'snack-bar', msg: v ? 'Đã thêm vào danh sách clip HOT' : 'Đã xóa khỏi danh sách clip HOT' });\r\n\t        });\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.updateStatus = function () {\r\n\t        var _this = this;\r\n\t        if (this.item.status === 0)\r\n\t            return;\r\n\t        this.videoService.updateVideoStatus(this.item._id, this.item.status * -1).subscribe(function (v) {\r\n\t            _this.item.status = v;\r\n\t            _this.eventService.emit({ com: 'snack-bar', msg: v == 1 ? 'Video đã được hiển thị' : 'Video đã bị ẩn' });\r\n\t        });\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.favorite = function () {\r\n\t        var _this = this;\r\n\t        if (!this.isFavorite) {\r\n\t            this.videoService.addFavorite(this.item).subscribe(function (v) {\r\n\t                if (v.length > 0) {\r\n\t                    _this.userService.currentUser.favorites = v;\r\n\t                    _this.userService.save();\r\n\t                    _this.eventService.emit({ com: 'snack-bar', msg: 'Đã thêm vào danh sách yêu thích' });\r\n\t                }\r\n\t                else {\r\n\t                    _this.eventService.emit({ com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý' });\r\n\t                }\r\n\t            }, function (error) { return _this.eventService.emit({ com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý' }); });\r\n\t        }\r\n\t        else {\r\n\t            this.videoService.removeFavorite(this.item._id).subscribe(function (v) {\r\n\t                _this.userService.currentUser.favorites = v;\r\n\t                _this.userService.save();\r\n\t                _this.eventService.emit({ com: 'snack-bar', msg: 'Đã xóa khỏi danh sách yêu thích' });\r\n\t            }, function (error) { return _this.eventService.emit({ com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý' }); });\r\n\t        }\r\n\t        this.isFavorite = !this.isFavorite;\r\n\t    };\r\n\t    VideoDetailsComponent.prototype.ngOnChanges = function (changes) {\r\n\t        this.locationHref = location.href;\r\n\t        this.metaService.setTitle(this.item.title);\r\n\t        this.metaService.setTag('og:type', 'video.other');\r\n\t        this.metaService.setTag('og:url', location.href);\r\n\t        this.metaService.setTag('og:image', this.item.image);\r\n\t        this.metaService.setTag('video:writer', this.item.creator);\r\n\t        this.applyKeyword();\r\n\t        this.checkFavorite();\r\n\t        this.isChecked = false;\r\n\t        if (this.container)\r\n\t            this.container.scrollTop = 48;\r\n\t    };\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', (typeof (_a = typeof video_service_1.VideoDetails !== 'undefined' && video_service_1.VideoDetails) === 'function' && _a) || Object)\r\n\t    ], VideoDetailsComponent.prototype, \"item\", void 0);\r\n\t    VideoDetailsComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-details',\r\n\t            template: \"\\n      <div class=\\\"mdl-card mdl-cell--12-col\\\" *ngIf=\\\"item\\\">\\n        <div class=\\\"mdl-card__title mdl-card--expand\\\">\\n          <h2 class=\\\"mdl-card__title-text\\\">{{item.title}}</h2>\\n        </div>\\n        <div class=\\\"mdl-card__supporting-text\\\" style=\\\"width: initial;\\\">          \\n          <div class=\\\"mdl-grid mdl-grid--no-spacing\\\">\\n            <div class=\\\"mdl-cell mdl-cell--8-col mdl-cell--5-col-tablet mdl-cell--4-col-phone mdl-cell--top left\\\">\\n              <span><i class=\\\"material-icons dp48\\\">tag_faces</i>\\n              &nbsp;{{item.creator}}&nbsp;&nbsp;</span>\\n              <span *ngIf=\\\"item.nowOnTime\\\"><i class=\\\"material-icons dp48\\\">alarm_on</i>\\n              &nbsp;{{item.nowOnTime}}&nbsp;&nbsp;</span>\\n              <span *ngIf=\\\"item.duration\\\"><i class=\\\"material-icons dp48\\\">alarm</i>\\n              &nbsp;{{item.duration | HowlongPipe}}&nbsp;&nbsp;</span>\\n            </div>\\n            <div class=\\\"mdl-cell mdl-cell--4-col mdl-cell--3-col-tablet mdl-cell--4-col-phone mdl-cell--top right\\\" align=\\\"right\\\">\\n              <button id=\\\"btnFavorite\\\" class=\\\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\\\" [ngClass]=\\\"isFavorite ? 'mdl-button--accent' : ''\\\" (click)=\\\"favorite($event)\\\" title=\\\"{{isFavorite ? 'X\\u00F3a kh\\u1ECFi': 'Th\\u00EAm v\\u00E0o'}} danh s\\u00E1ch y\\u00EAu th\\u00EDch\\\">\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"isFavorite\\\">favorite_border</i>\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"!isFavorite\\\">favorite</i>\\n              </button>              \\n              <facebook-share [title]=\\\"item.title\\\" [description]=[item.title] [picture]=\\\"item.image\\\" [caption]=\\\"'ClipVNet.com'\\\"></facebook-share>\\n\\n              <button id=\\\"btnSpecial\\\" *ngIf=\\\"userService.isBoss()\\\" class=\\\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\\\" [ngClass]=\\\"item.isSpecial ? 'mdl-button--accent' : ''\\\" (click)=\\\"special($event)\\\" title=\\\"{{item.isSpecial ? '\\u0110\\u00E3 th\\u00EAm v\\u00E0o': '\\u0110\\u00E3 x\\u00F3a kh\\u1ECFi'}} danh s\\u00E1ch clip HOT\\\">\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"item.isSpecial\\\">star_border</i>\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"!item.isSpecial\\\">star</i>\\n              </button>\\n              <button id=\\\"btnRemove\\\" *ngIf=\\\"userService.isBoss()\\\" class=\\\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\\\" [ngClass]=\\\"item.status === 1 ? 'mdl-button--accent' : ''\\\" (click)=\\\"updateStatus($event)\\\" title=\\\"{{item.status === 1 ? 'Video \\u0111\\u00E3 \\u0111\\u01B0\\u1EE3c hi\\u1EC3n th\\u1ECB': (item.status === -1 ? 'Video \\u0111\\u00E3 b\\u1ECB \\u1EA9n' : 'Video ch\\u01B0a \\u0111\\u01B0\\u1EE3c duy\\u1EC7t')}}\\\">\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"item.status === -1\\\">visibility</i>\\n                <i class=\\\"material-icons\\\" [hidden]=\\\"item.status === 1\\\">visibility_off</i>\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"videoWrapper\\\">        \\n          <youtube-player [link]=\\\"item.link\\\" *ngIf=\\\"item.youtubeid\\\"></youtube-player>\\n          <facebook-player [link]=\\\"item.link\\\" *ngIf=\\\"item.facebookid\\\"></facebook-player>\\n          <html5-player [link]=\\\"item.link\\\" *ngIf=\\\"!item.youtubeid && !item.facebookid\\\"></html5-player>          \\n        </div>\\n        <div class=\\\"keywords\\\" *ngIf=\\\"!userService.isBoss()\\\">\\n          <div *ngFor=\\\"let k of item.keywords\\\" [routerLink]=\\\"['/keyword', k._id, k.uname]\\\">{{k.name}}</div>\\n        </div>\\n        <div class=\\\"keywords\\\" *ngIf=\\\"userService.isBoss()\\\">\\n          <div *ngFor=\\\"let k of videoService.keywords\\\" class=\\\"{{hasExist(k._id) ? 'active' : ''}}\\\" (click)=\\\"manageKeyword(k)\\\">{{k.name}}</div>          \\n        </div>\\n        <hr style=\\\"clear: both\\\"/>\\n        <facebook-comment [link]=\\\"locationHref\\\"></facebook-comment>\\n      </div>\\n    \",\r\n\t            pipes: [filter_pipe_1.HowlongPipe],\r\n\t            directives: [video_directive_1.GoTop, facebook_component_1.FacebookCommentComponent, facebook_component_1.FacebookShareComponent, router_1.ROUTER_DIRECTIVES, facebook_component_1.FacebookPlayerComponent, facebook_component_1.YoutubePlayerComponent, facebook_component_1.Html5PlayerComponent]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_b = typeof ng2_meta_1.MetaService !== 'undefined' && ng2_meta_1.MetaService) === 'function' && _b) || Object, (typeof (_c = typeof video_service_1.VideoService !== 'undefined' && video_service_1.VideoService) === 'function' && _c) || Object, (typeof (_d = typeof event_service_1.EventService !== 'undefined' && event_service_1.EventService) === 'function' && _d) || Object, (typeof (_e = typeof user_service_1.UserService !== 'undefined' && user_service_1.UserService) === 'function' && _e) || Object, (typeof (_f = typeof router_1.Router !== 'undefined' && router_1.Router) === 'function' && _f) || Object])\r\n\t    ], VideoDetailsComponent);\r\n\t    return VideoDetailsComponent;\r\n\t    var _a, _b, _c, _d, _e, _f;\r\n\t}());\r\n\texports.VideoDetailsComponent = VideoDetailsComponent;\r\n\n\n/***/ },\n\n/***/ 487:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tfunction __export(m) {\r\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n\t}\r\n\t__export(__webpack_require__(992));\r\n\t__export(__webpack_require__(994));\r\n\t__export(__webpack_require__(996));\r\n\tvar _1 = __webpack_require__(487);\r\n\texports.routes = { path: '', component: _1.VideoPageComponent,\r\n\t    children: [\r\n\t        { path: '', pathMatch: 'full', component: _1.VideoCardListComponent },\r\n\t        { path: ':mode', pathMatch: 'full', component: _1.VideoCardListComponent },\r\n\t        { path: 'keyword/:id/:title', pathMatch: 'full', component: _1.VideoCardListComponent },\r\n\t        { path: 'search/:txtSearch', pathMatch: 'full', component: _1.VideoCardListComponent }\r\n\t    ]\r\n\t};\r\n\n\n/***/ },\n\n/***/ 993:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar platform_browser_1 = __webpack_require__(57);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar filter_pipe_1 = __webpack_require__(991);\r\n\tvar VideoCardItemComponent = (function () {\r\n\t    function VideoCardItemComponent(sanitizer) {\r\n\t        this.sanitizer = sanitizer;\r\n\t    }\r\n\t    VideoCardItemComponent.prototype.ngOnInit = function () {\r\n\t        this.url = this.sanitizer.bypassSecurityTrustUrl(this.item.image);\r\n\t    };\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', (typeof (_a = typeof video_service_1.VideoCard !== 'undefined' && video_service_1.VideoCard) === 'function' && _a) || Object)\r\n\t    ], VideoCardItemComponent.prototype, \"item\", void 0);\r\n\t    VideoCardItemComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-card-item',\r\n\t            template: \"\\n    <a [routerLink]=\\\"['/detail', item._id, item.title0]\\\" class=\\\"nothing\\\">\\n      <div class=\\\"mdl-card__title\\\">\\n         <h4 class=\\\"mdl-card__title-text main-color\\\">{{item.title}}</h4>\\n      </div>      \\n      <div class=\\\"mdl-card__media\\\">\\n        <img src=\\\"{{item.image}}\\\"                                 *ngIf=\\\"!item.youtubeid\\\">\\n        <img src=\\\"http://i.ytimg.com/vi/{{item.youtubeid}}/mqdefault.jpg\\\" *ngIf=\\\"item.youtubeid\\\">\\n      </div>\\n      <div class=\\\"howlong\\\" *ngIf=\\\"item.duration\\\"><i class=\\\"material-icons dp48\\\">alarm</i>{{item.duration | HowlongPipe}}</div>\\n      <div class=\\\"mdl-card__supporting-text icon-des mdl-grid des-color\\\">\\n        <div class=\\\"mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone ellipsis-1\\\" title=\\\"{{item.creator}}\\\"><i class=\\\"material-icons dp48\\\">tag_faces</i> {{item.creator}}</div>\\n        <div class=\\\"mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone ellipsis-1\\\" title=\\\"{{item.nowOnTime}}\\\"><i class=\\\"material-icons dp48\\\">alarm_on</i> {{item.nowOnTime}}</div>\\n      </div>\\n    </a>\\n    \",\r\n\t            host: {\r\n\t                '[class.mdl-card]': 'true',\r\n\t                '[class.mdl-shadow--2dp]': 'true',\r\n\t                '[class.mdl-cell]': 'true',\r\n\t                '[class.mdl-cell--4-col]': 'true',\r\n\t                '[class.mdl-cell--4-col-tablet]': 'true',\r\n\t                '[class.mdl-cell--4-col-phone]': 'true'\r\n\t            },\r\n\t            pipes: [filter_pipe_1.HowlongPipe],\r\n\t            directives: [router_1.ROUTER_DIRECTIVES]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_b = typeof platform_browser_1.DomSanitizationService !== 'undefined' && platform_browser_1.DomSanitizationService) === 'function' && _b) || Object])\r\n\t    ], VideoCardItemComponent);\r\n\t    return VideoCardItemComponent;\r\n\t    var _a, _b;\r\n\t}());\r\n\texports.VideoCardItemComponent = VideoCardItemComponent;\r\n\n\n/***/ },\n\n/***/ 994:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar ng2_meta_1 = __webpack_require__(488);\r\n\tvar event_service_1 = __webpack_require__(50);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar video_directive_1 = __webpack_require__(306);\r\n\tvar video_card_item_component_1 = __webpack_require__(993);\r\n\tvar video_card_loading_component_1 = __webpack_require__(995);\r\n\tvar VideoCardListComponent = (function () {\r\n\t    function VideoCardListComponent(metaService, router, route, videoService, eventService, cmpResolver) {\r\n\t        this.metaService = metaService;\r\n\t        this.router = router;\r\n\t        this.route = route;\r\n\t        this.videoService = videoService;\r\n\t        this.eventService = eventService;\r\n\t        this.cmpResolver = cmpResolver;\r\n\t        this.isLoading = false;\r\n\t        this.isInit = false;\r\n\t        this.isLastAutoScroll = false;\r\n\t        this.initPage = 1;\r\n\t        this.query = {};\r\n\t        this.page = 1;\r\n\t        this.rows = 12;\r\n\t    }\r\n\t    VideoCardListComponent.prototype.ngAfterViewInit = function () {\r\n\t        componentHandler.upgradeDom();\r\n\t    };\r\n\t    VideoCardListComponent.prototype.ngOnChanges = function (changes) {\r\n\t        var _this = this;\r\n\t        this.nextPage(this, function () {\r\n\t            _this.eventService.emit({ com: 'video-card-list', action: 'loaded' });\r\n\t        });\r\n\t    };\r\n\t    VideoCardListComponent.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        this.gsub = this.eventService.emitter.subscribe(function (data) {\r\n\t            if (data.com === 'video-card-list') {\r\n\t                if (data.action === 'append') {\r\n\t                    _this.page++;\r\n\t                    _this.nextPage(_this, function () {\r\n\t                        _this.eventService.emit({ com: 'video-card-list', action: 'loaded' });\r\n\t                        if (_this.page > _this.initPage && (_this.page - _this.initPage) % 2 === 0) {\r\n\t                            _this.isLastAutoScroll = true;\r\n\t                            return _this.eventService.emit({ com: 'video-card-list', action: 'stop' });\r\n\t                        }\r\n\t                    });\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t        this.sub = this.route.params.subscribe(function (params) {\r\n\t            var txtSearch = params['txtSearch'];\r\n\t            var keywordId = params['id'];\r\n\t            var title;\r\n\t            if (txtSearch) {\r\n\t                _this.mode = 'search';\r\n\t                _this.query.txtSearch = txtSearch;\r\n\t                title = txtSearch + '***';\r\n\t            }\r\n\t            else if (keywordId) {\r\n\t                _this.mode = 'keyword';\r\n\t                _this.query.keyword = keywordId;\r\n\t                var kwidx = _this.videoService.keywords.findIndex(function (e) { return e._id === keywordId; });\r\n\t                title = kwidx < 0 ? keywordId : _this.videoService.keywords[kwidx].name;\r\n\t            }\r\n\t            else {\r\n\t                _this.mode = params['mode'] || 'newest';\r\n\t                if (_this.mode === 'most') {\r\n\t                    title = 'Clip xem nhiều nhất';\r\n\t                }\r\n\t                else if (_this.mode === 'hot') {\r\n\t                    title = 'Clip HOT nhất';\r\n\t                }\r\n\t            }\r\n\t            if (title)\r\n\t                setTimeout(function () { _this.metaService.setTitle(title); });\r\n\t            _this.init();\r\n\t        });\r\n\t        this.qsub = this.router.routerState.queryParams.subscribe(function (params) {\r\n\t            _this.initPage = +params.page || 1;\r\n\t            _this.page = _this.initPage;\r\n\t            _this.isLastAutoScroll = false;\r\n\t            _this.init();\r\n\t        });\r\n\t    };\r\n\t    VideoCardListComponent.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        if (this.isInit)\r\n\t            return;\r\n\t        this.isInit = true;\r\n\t        setTimeout(function () {\r\n\t            _this.clearContent(_this);\r\n\t            _this.eventService.emit({ com: 'video-card-list', action: 'start' });\r\n\t            _this.nextPage(_this, function () {\r\n\t                _this.isInit = false;\r\n\t                _this.eventService.emit({ com: 'video-card-list', action: 'loaded' });\r\n\t            });\r\n\t        }, 100);\r\n\t    };\r\n\t    VideoCardListComponent.prototype.ngOnDestroy = function () {\r\n\t        this.gsub.unsubscribe();\r\n\t        this.qsub.unsubscribe();\r\n\t        this.sub.unsubscribe();\r\n\t    };\r\n\t    VideoCardListComponent.prototype.nextPage = function (self, fcDone) {\r\n\t        self.isLoading = true;\r\n\t        self.eventService.emit({ com: 'page-loading', action: 1 });\r\n\t        if (self.mode === 'most') {\r\n\t            self.videoService.getMostVideos({ page: self.page, rows: self.rows }).subscribe(function (videos) {\r\n\t                self.drawContent(self, videos, fcDone);\r\n\t            }, self.drawError);\r\n\t        }\r\n\t        else if (self.mode === 'newest') {\r\n\t            self.videoService.getNewestVideos({ page: self.page, rows: self.rows }).subscribe(function (videos) {\r\n\t                self.drawContent(self, videos, fcDone);\r\n\t            }, self.drawError);\r\n\t        }\r\n\t        else if (self.mode === 'hot') {\r\n\t            self.videoService.getHotVideos({ page: self.page, rows: self.rows }).subscribe(function (videos) {\r\n\t                self.drawContent(self, videos, fcDone);\r\n\t            }, self.drawError);\r\n\t        }\r\n\t        else if (self.mode === 'search') {\r\n\t            self.videoService.searchVideos(self.query.txtSearch, { page: self.page, rows: self.rows }).subscribe(function (videos) {\r\n\t                self.drawContent(self, videos, fcDone);\r\n\t            }, self.drawError);\r\n\t        }\r\n\t        else if (self.mode === 'keyword') {\r\n\t            self.videoService.getKeywordVideos(self.query.keyword, { page: self.page, rows: self.rows }).subscribe(function (videos) {\r\n\t                self.drawContent(self, videos, fcDone);\r\n\t            }, self.drawError);\r\n\t        }\r\n\t    };\r\n\t    VideoCardListComponent.prototype.drawError = function (err) {\r\n\t        console.error(err);\r\n\t    };\r\n\t    VideoCardListComponent.prototype.clearContent = function (self) {\r\n\t        self.viewContainer.clear();\r\n\t    };\r\n\t    VideoCardListComponent.prototype.drawContent = function (self, videos, fcDone) {\r\n\t        if (videos.length === 0) {\r\n\t            this.isLoading = undefined;\r\n\t            return fcDone();\r\n\t        }\r\n\t        self.cmpResolver.resolveComponent(video_card_item_component_1.VideoCardItemComponent)\r\n\t            .then(function (factory) {\r\n\t            var index = self.viewContainer.length;\r\n\t            for (var i in videos) {\r\n\t                var com = self.viewContainer.createComponent(factory, index++, self.viewContainer.injector);\r\n\t                com.instance.item = videos[i];\r\n\t            }\r\n\t            self.isLoading = false;\r\n\t            self.eventService.emit({ com: 'page-loading', action: 0 });\r\n\t            fcDone();\r\n\t        });\r\n\t    };\r\n\t    __decorate([\r\n\t        core_1.ViewChild('viewContainer', { read: core_1.ViewContainerRef }), \r\n\t        __metadata('design:type', Object)\r\n\t    ], VideoCardListComponent.prototype, \"viewContainer\", void 0);\r\n\t    VideoCardListComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-card-list',\r\n\t            template: \"\\n      <div class=\\\"android-card-container mdl-grid\\\" id=\\\"mainContent0\\\">\\n          <div #viewContainer></div>\\n          <video-card-loading [hidden]=\\\"!isLoading\\\"></video-card-loading>\\n      </div>      \\n      <div *ngIf=\\\"isLastAutoScroll\\\" align=\\\"center\\\" class=\\\"isLastAutoScroll\\\">\\n        <button class=\\\"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored\\\" [routerLink]=\\\"['/', mode]\\\" [queryParams]=\\\"{page: page+1}\\\" go-top>\\n          <i class=\\\"normal material-icons\\\">hdr_weak</i>\\n          <i class=\\\"hover material-icons\\\">hdr_strong</i>\\n        </button>\\n      </div>\\n    \",\r\n\t            styles: [\r\n\t                'button { position: relative; margin-bottom: -90px; }',\r\n\t                'button i.hover { display: none; }',\r\n\t                'button:hover i.hover { display: block; }',\r\n\t                'button:hover i.normal { display: none; }'\r\n\t            ],\r\n\t            directives: [video_card_item_component_1.VideoCardItemComponent, video_card_loading_component_1.VideoCardLoadingComponent, router_1.ROUTER_DIRECTIVES, video_directive_1.GoTop]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_a = typeof ng2_meta_1.MetaService !== 'undefined' && ng2_meta_1.MetaService) === 'function' && _a) || Object, (typeof (_b = typeof router_1.Router !== 'undefined' && router_1.Router) === 'function' && _b) || Object, (typeof (_c = typeof router_1.ActivatedRoute !== 'undefined' && router_1.ActivatedRoute) === 'function' && _c) || Object, (typeof (_d = typeof video_service_1.VideoService !== 'undefined' && video_service_1.VideoService) === 'function' && _d) || Object, (typeof (_e = typeof event_service_1.EventService !== 'undefined' && event_service_1.EventService) === 'function' && _e) || Object, (typeof (_f = typeof core_1.ComponentResolver !== 'undefined' && core_1.ComponentResolver) === 'function' && _f) || Object])\r\n\t    ], VideoCardListComponent);\r\n\t    return VideoCardListComponent;\r\n\t    var _a, _b, _c, _d, _e, _f;\r\n\t}());\r\n\texports.VideoCardListComponent = VideoCardListComponent;\r\n\n\n/***/ },\n\n/***/ 995:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar VideoCardLoadingComponent = (function () {\r\n\t    function VideoCardLoadingComponent() {\r\n\t    }\r\n\t    VideoCardLoadingComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-card-loading',\r\n\t            template: \"\\n      <img src=\\\"/assets/img/loading.gif\\\" class=\\\"inner\\\" />\\n    \",\r\n\t            host: {\r\n\t                '[class.mdl-card]': 'true',\r\n\t                '[class.mdl-cell]': 'true',\r\n\t                '[class.mdl-cell--4-col]': 'true',\r\n\t                '[class.mdl-cell--4-col-tablet]': 'true',\r\n\t                '[class.mdl-cell--4-col-phone]': 'true'\r\n\t            }\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [])\r\n\t    ], VideoCardLoadingComponent);\r\n\t    return VideoCardLoadingComponent;\r\n\t}());\r\n\texports.VideoCardLoadingComponent = VideoCardLoadingComponent;\r\n\n\n/***/ },\n\n/***/ 996:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar common_1 = __webpack_require__(34);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar video_relation_list_component_1 = __webpack_require__(992);\r\n\tvar facebook_component_1 = __webpack_require__(305);\r\n\tvar user_favorite_video_component_1 = __webpack_require__(489);\r\n\tvar event_service_1 = __webpack_require__(50);\r\n\tvar VideoPageComponent = (function () {\r\n\t    function VideoPageComponent(eventService) {\r\n\t        this.eventService = eventService;\r\n\t    }\r\n\t    VideoPageComponent.prototype.ngOnInit = function () {\r\n\t    };\r\n\t    VideoPageComponent.prototype.ngOnDestroy = function () {\r\n\t        this.eventService.emit({ com: 'video-card-list', action: 'stop' });\r\n\t    };\r\n\t    VideoPageComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-page',\r\n\t            template: \"\\n      <div class=\\\"mdl-grid\\\">\\n        <div class=\\\"mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\\\">                 \\n          <router-outlet></router-outlet>\\n        </div>\\n        <div                class=\\\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\\\">\\n          <facebook-like *xl class=\\\"mdl-card\\\"></facebook-like>\\n          <br/>\\n          <br/>\\n          <div class=\\\"fixed-col\\\">\\n            <user-favorite-video [rows]=\\\"3\\\"></user-favorite-video>\\n            <br/>\\n            <br/>\\n            <video-relation-list [mode]=\\\"'most'\\\" [page]=\\\"1\\\" [rows]=\\\"8\\\"></video-relation-list>\\n            <br/>\\n            <br/>\\n            <video-relation-list [mode]=\\\"'hot'\\\" [page]=\\\"1\\\" [rows]=\\\"8\\\"></video-relation-list>\\n          </div>\\n        </div>\\n      </div>\\n    \",\r\n\t            directives: [video_relation_list_component_1.VideoRelationListComponent, facebook_component_1.FacebookLikeComponent, common_1.CORE_DIRECTIVES, router_1.ROUTER_DIRECTIVES, user_favorite_video_component_1.UserFavoriteVideoComponent]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_a = typeof event_service_1.EventService !== 'undefined' && event_service_1.EventService) === 'function' && _a) || Object])\r\n\t    ], VideoPageComponent);\r\n\t    return VideoPageComponent;\r\n\t    var _a;\r\n\t}());\r\n\texports.VideoPageComponent = VideoPageComponent;\r\n\n\n/***/ },\n\n/***/ 997:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(49);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar filter_pipe_1 = __webpack_require__(991);\r\n\tvar VideoRelationItemComponent = (function () {\r\n\t    function VideoRelationItemComponent() {\r\n\t    }\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', (typeof (_a = typeof video_service_1.VideoCard !== 'undefined' && video_service_1.VideoCard) === 'function' && _a) || Object)\r\n\t    ], VideoRelationItemComponent.prototype, \"item\", void 0);\r\n\t    VideoRelationItemComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-relation-item',\r\n\t            template: \"\\n      <li class=\\\"mdl-list__item mdl-list__item--three-line\\\">\\n        <a class=\\\"mdl-list__item-primary-content nothing\\\" [routerLink]=\\\"['/detail', item._id, item.title0]\\\">          \\n          <div class=\\\"img-des\\\">\\n            <img src=\\\"{{item.image}}\\\" width=\\\"100\\\" class=\\\"rounded\\\" *ngIf=\\\"!item.youtubeid\\\">\\n            <img src=\\\"http://i.ytimg.com/vi/{{item.youtubeid}}/1.jpg\\\" width=\\\"100\\\" style=\\\"float: left; margin-right: 5px;\\\" class=\\\"rounded\\\" *ngIf=\\\"item.youtubeid\\\">                    \\n            <div class=\\\"howlong\\\"><i class=\\\"material-icons dp48\\\">alarm</i>{{item.duration | HowlongPipe}}</div>\\n          </div>\\n          <div class=\\\"main-color title\\\">{{item.title}}</div>\\n          <span class=\\\"mdl-list__item-text-body des-color\\\">\\n            <i class=\\\"material-icons dp48\\\">alarm_on</i> {{item.nowOnTime}}\\n          </span>\\n        </a>\\n      </li>\\n    \",\r\n\t            pipes: [filter_pipe_1.HowlongPipe],\r\n\t            directives: [router_1.ROUTER_DIRECTIVES]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [])\r\n\t    ], VideoRelationItemComponent);\r\n\t    return VideoRelationItemComponent;\r\n\t    var _a;\r\n\t}());\r\n\texports.VideoRelationItemComponent = VideoRelationItemComponent;\r\n\n\n/***/ },\n\n/***/ 992:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar video_service_1 = __webpack_require__(88);\r\n\tvar video_relation_item_component_1 = __webpack_require__(997);\r\n\tvar VideoRelationListComponent = (function () {\r\n\t    function VideoRelationListComponent(videoService) {\r\n\t        this.videoService = videoService;\r\n\t        this.query = {};\r\n\t        this.videosRelation = [];\r\n\t    }\r\n\t    VideoRelationListComponent.prototype.ngOnChanges = function (changes) {\r\n\t        var _this = this;\r\n\t        if (this.mode === 'relation') {\r\n\t            this.title = 'Video liên quan';\r\n\t            this.videoService.getRelateVideos(this.query.id, this.query.keywords, this.query.updateat, { page: this.page, rows: this.rows }).subscribe(function (videos) { _this.videosRelation = videos; }, function (error) { return console.error(error); });\r\n\t        }\r\n\t    };\r\n\t    VideoRelationListComponent.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        if (this.mode === 'most') {\r\n\t            this.title = 'Video xem nhiều nhất';\r\n\t            this.videoService.getMostVideos({ page: this.page, rows: this.rows }).subscribe(function (videos) { _this.videosRelation = videos; }, function (error) { return console.error(error); });\r\n\t        }\r\n\t        else if (this.mode === 'hot') {\r\n\t            this.title = 'Video hot';\r\n\t            this.videoService.getHotVideos({ page: this.page, rows: this.rows }).subscribe(function (videos) { _this.videosRelation = videos; }, function (error) { return console.error(error); });\r\n\t        }\r\n\t    };\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', String)\r\n\t    ], VideoRelationListComponent.prototype, \"mode\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Number)\r\n\t    ], VideoRelationListComponent.prototype, \"page\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Number)\r\n\t    ], VideoRelationListComponent.prototype, \"rows\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Object)\r\n\t    ], VideoRelationListComponent.prototype, \"query\", void 0);\r\n\t    VideoRelationListComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'video-relation-list',\r\n\t            template: \"\\n      <div class=\\\"mdl-card mdl-shadow--2dp\\\">\\n        <div class=\\\"mdl-card__title mdl-card--border\\\">\\n          <h6 class=\\\"mdl-card__title-text\\\">{{title}}</h6>\\n          <div class=\\\"mdl-layout-spacer\\\"></div>\\n          <i class=\\\"material-icons mdl-list__item-icon\\\">videocam</i>\\n        </div>\\n        <ul class=\\\"mdl-list\\\">\\n          <video-relation-item style=\\\"width: 100%\\\" *ngFor=\\\"let v of videosRelation\\\" [item]=\\\"v\\\"></video-relation-item>\\n        </ul>\\n      </div>\\n    \",\r\n\t            directives: [video_relation_item_component_1.VideoRelationItemComponent]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [(typeof (_a = typeof video_service_1.VideoService !== 'undefined' && video_service_1.VideoService) === 'function' && _a) || Object])\r\n\t    ], VideoRelationListComponent);\r\n\t    return VideoRelationListComponent;\r\n\t    var _a;\r\n\t}());\r\n\texports.VideoRelationListComponent = VideoRelationListComponent;\r\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 1.1fba316746c8e104da9f.chunk.js\n **/","import {Pipe, PipeTransform} from '@angular/core';\r\n\r\n// Tell Angular2 we're creating a Pipe with TypeScript decorators\r\n@Pipe({\r\n  name: 'HowlongPipe'\r\n})\r\nexport class HowlongPipe implements PipeTransform {\r\n\r\n  // Transform is the new \"return function(value, args)\" in Angular 1.x\r\n  transform(str: any) {  \t\r\n  \tif(!str) return str;\r\n    return str.replace('H', 'g').replace('M', 'p').replace('S', '\"');\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/filter.pipe.ts\n **/","export * from './video-details-page.component';\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/video/index.ts\n **/","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { CORE_DIRECTIVES } from '@angular/common';\r\n\r\nimport { FacebookLikeComponent } from '../facebook.component';\r\nimport { VideoDetailsComponent } from './video-details.component';\r\nimport { VideoRelationListComponent } from '../videos';\r\nimport { VideoDetails, VideoService } from '../video.service';\r\n\r\n@Component({\r\n    selector: 'video-details-page',\r\n    template: `\r\n      <div class=\"mdl-grid\" *ngIf=\"item\">\r\n        <video-details [item] = \"item\" class=\"mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\"></video-details>\r\n        <div                       class=\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\">\r\n          <video-relation-list [query]=\"{keywords: item.keywords, id: item._id, updateat: item.updateat}\" [mode]=\"'relation'\" [page]=\"1\" [rows]=\"10\" class=\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\"></video-relation-list>\r\n        </div>\r\n      </div>\r\n    `,\r\n    directives: [VideoDetailsComponent, VideoRelationListComponent, FacebookLikeComponent, CORE_DIRECTIVES]\r\n})\r\nexport class VideoDetailsPageComponent implements OnInit { \r\n  item: VideoDetails;\r\n\r\n  constructor(private route: ActivatedRoute, private videoService: VideoService){    \r\n    this.route.data.subscribe((data: any) => {      \r\n      this.item = data.video;      \r\n    });\r\n  }\r\n\r\n  ngOnInit(){\r\n    \r\n  }\r\n\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/video/video-details-page.component.ts\n **/","import { Component, Input, OnInit, OnChanges, SimpleChange, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { ROUTER_DIRECTIVES, Router } from '@angular/router';\r\nimport { MetaService } from 'ng2-meta';\r\n\r\nimport { VideoDetails, VideoService } from '../video.service';\r\nimport { EventService } from '../event.service';\r\nimport { HowlongPipe } from '../filter.pipe';\r\nimport { UserService } from '../user.service';\r\nimport { GoTop } from '../video.directive';\r\nimport { FacebookCommentComponent, FacebookShareComponent, FacebookPlayerComponent, YoutubePlayerComponent, Html5PlayerComponent } from '../facebook.component';\r\n\r\ndeclare var location: any;\r\ndeclare var componentHandler: any;\r\ndeclare var window: any;\r\n\r\n@Component({\r\n    selector: 'video-details',\r\n    template: `\r\n      <div class=\"mdl-card mdl-cell--12-col\" *ngIf=\"item\">\r\n        <div class=\"mdl-card__title mdl-card--expand\">\r\n          <h2 class=\"mdl-card__title-text\">{{item.title}}</h2>\r\n        </div>\r\n        <div class=\"mdl-card__supporting-text\" style=\"width: initial;\">          \r\n          <div class=\"mdl-grid mdl-grid--no-spacing\">\r\n            <div class=\"mdl-cell mdl-cell--8-col mdl-cell--5-col-tablet mdl-cell--4-col-phone mdl-cell--top left\">\r\n              <span><i class=\"material-icons dp48\">tag_faces</i>\r\n              &nbsp;{{item.creator}}&nbsp;&nbsp;</span>\r\n              <span *ngIf=\"item.nowOnTime\"><i class=\"material-icons dp48\">alarm_on</i>\r\n              &nbsp;{{item.nowOnTime}}&nbsp;&nbsp;</span>\r\n              <span *ngIf=\"item.duration\"><i class=\"material-icons dp48\">alarm</i>\r\n              &nbsp;{{item.duration | HowlongPipe}}&nbsp;&nbsp;</span>\r\n            </div>\r\n            <div class=\"mdl-cell mdl-cell--4-col mdl-cell--3-col-tablet mdl-cell--4-col-phone mdl-cell--top right\" align=\"right\">\r\n              <button id=\"btnFavorite\" class=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\" [ngClass]=\"isFavorite ? 'mdl-button--accent' : ''\" (click)=\"favorite($event)\" title=\"{{isFavorite ? 'Xóa khỏi': 'Thêm vào'}} danh sách yêu thích\">\r\n                <i class=\"material-icons\" [hidden]=\"isFavorite\">favorite_border</i>\r\n                <i class=\"material-icons\" [hidden]=\"!isFavorite\">favorite</i>\r\n              </button>              \r\n              <facebook-share [title]=\"item.title\" [description]=[item.title] [picture]=\"item.image\" [caption]=\"'ClipVNet.com'\"></facebook-share>\r\n\r\n              <button id=\"btnSpecial\" *ngIf=\"userService.isBoss()\" class=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\" [ngClass]=\"item.isSpecial ? 'mdl-button--accent' : ''\" (click)=\"special($event)\" title=\"{{item.isSpecial ? 'Đã thêm vào': 'Đã xóa khỏi'}} danh sách clip HOT\">\r\n                <i class=\"material-icons\" [hidden]=\"item.isSpecial\">star_border</i>\r\n                <i class=\"material-icons\" [hidden]=\"!item.isSpecial\">star</i>\r\n              </button>\r\n              <button id=\"btnRemove\" *ngIf=\"userService.isBoss()\" class=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\" [ngClass]=\"item.status === 1 ? 'mdl-button--accent' : ''\" (click)=\"updateStatus($event)\" title=\"{{item.status === 1 ? 'Video đã được hiển thị': (item.status === -1 ? 'Video đã bị ẩn' : 'Video chưa được duyệt')}}\">\r\n                <i class=\"material-icons\" [hidden]=\"item.status === -1\">visibility</i>\r\n                <i class=\"material-icons\" [hidden]=\"item.status === 1\">visibility_off</i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"videoWrapper\">        \r\n          <youtube-player [link]=\"item.link\" *ngIf=\"item.youtubeid\"></youtube-player>\r\n          <facebook-player [link]=\"item.link\" *ngIf=\"item.facebookid\"></facebook-player>\r\n          <html5-player [link]=\"item.link\" *ngIf=\"!item.youtubeid && !item.facebookid\"></html5-player>          \r\n        </div>\r\n        <div class=\"keywords\" *ngIf=\"!userService.isBoss()\">\r\n          <div *ngFor=\"let k of item.keywords\" [routerLink]=\"['/keyword', k._id, k.uname]\">{{k.name}}</div>\r\n        </div>\r\n        <div class=\"keywords\" *ngIf=\"userService.isBoss()\">\r\n          <div *ngFor=\"let k of videoService.keywords\" class=\"{{hasExist(k._id) ? 'active' : ''}}\" (click)=\"manageKeyword(k)\">{{k.name}}</div>          \r\n        </div>\r\n        <hr style=\"clear: both\"/>\r\n        <facebook-comment [link]=\"locationHref\"></facebook-comment>\r\n      </div>\r\n    `,\r\n    pipes: [HowlongPipe],\r\n    directives: [GoTop, FacebookCommentComponent, FacebookShareComponent, ROUTER_DIRECTIVES, FacebookPlayerComponent, YoutubePlayerComponent, Html5PlayerComponent]\r\n})\r\nexport class VideoDetailsComponent implements OnChanges, OnInit, OnDestroy, AfterViewInit { \r\n  @Input() item: VideoDetails;\r\n  isFavorite:boolean;\r\n  isSpecial:boolean;\r\n  locationHref: string;\r\n  gsub: any;\r\n  isChecked: boolean= false;\r\n  container: any;\r\n\r\n  constructor(private metaService: MetaService, private videoService: VideoService, private eventService: EventService, private userService: UserService, private router: Router){\r\n    \r\n  }\r\n\r\n  hasExist(kwid){\r\n    return this.item.keywords.findIndex((e)=>{\r\n      return e._id === kwid;\r\n    }) !== -1;\r\n  }\r\n\r\n  applyKeyword(){\r\n    for(let i in this.item.keywords){\r\n      for(let all of this.videoService.keywords){\r\n        if(this.item.keywords[i] instanceof Object) continue;\r\n        if(this.item.keywords[i] === all._id){\r\n          this.item.keywords[i] = all;\r\n        }\r\n      } \r\n    }\r\n  }\r\n\r\n  ngOnInit(){    \r\n    this.applyKeyword();\r\n    this.gsub = this.eventService.emitter.subscribe((data: any) => {\r\n      if(data.com === 'facebook'){\r\n        if(data.action === 'login'){\r\n          if(data.data){\r\n            this.checkFavorite();\r\n          }\r\n        }     \r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.container = window.document.querySelector('[scroll-bottom]');\r\n    this.container.scrollTop = 48;    \r\n  }\r\n\r\n  manageKeyword(kw){\r\n    this.videoService.updateVideoKeyword(this.item._id, kw._id).subscribe((kw:Array<any>) => {\r\n      this.item.keywords = kw;\r\n      this.applyKeyword();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    this.gsub.unsubscribe();\r\n  }\r\n\r\n  checkFavorite(){\r\n    if(!this.userService.currentUser) return;\r\n    this.isChecked = true;\r\n    this.isFavorite = this.userService.currentUser.favorites.findIndex((e, idx, arr) => {\r\n      if(e._id === this.item._id) return true;\r\n      return false;\r\n    }) != -1;\r\n  }\r\n\r\n  special(){\r\n    this.videoService.updateSpecial(this.item._id, !this.item.isSpecial).subscribe((v:any)=>{\r\n      this.item.isSpecial = v;\r\n      this.eventService.emit({com: 'snack-bar', msg: v ? 'Đã thêm vào danh sách clip HOT' : 'Đã xóa khỏi danh sách clip HOT'}); \r\n    });\r\n  }\r\n\r\n  updateStatus(){\r\n    if(this.item.status === 0) return;\r\n    this.videoService.updateVideoStatus(this.item._id, this.item.status*-1).subscribe((v:any)=>{\r\n      this.item.status = v;\r\n      this.eventService.emit({com: 'snack-bar', msg: v == 1 ? 'Video đã được hiển thị': 'Video đã bị ẩn'}); \r\n    });\r\n  }\r\n\r\n  favorite(){\r\n    if(!this.isFavorite){\r\n      this.videoService.addFavorite(this.item).subscribe(\r\n       (v: any) => { \r\n          if(v.length > 0){\r\n            this.userService.currentUser.favorites = v;\r\n            this.userService.save();\r\n            this.eventService.emit({com: 'snack-bar', msg: 'Đã thêm vào danh sách yêu thích'}); \r\n          }else{\r\n            this.eventService.emit({com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý'}); \r\n          }\r\n       },\r\n       error =>  this.eventService.emit({com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý'}));\r\n    }else{\r\n      this.videoService.removeFavorite(this.item._id).subscribe(\r\n       (v: any) => {             \r\n          this.userService.currentUser.favorites = v;\r\n          this.userService.save();\r\n          this.eventService.emit({com: 'snack-bar', msg: 'Đã xóa khỏi danh sách yêu thích'}); \r\n       },\r\n       error =>  this.eventService.emit({com: 'snack-bar', msg: 'Có lỗi trong quá trình xử lý'}));\r\n    }\r\n    this.isFavorite = !this.isFavorite;\r\n  }\r\n\r\n  ngOnChanges(changes: {[propertyName: string]: SimpleChange}){\r\n    this.locationHref = location.href;\r\n    \r\n    this.metaService.setTitle(this.item.title);        \r\n    this.metaService.setTag('og:type', 'video.other');\r\n    this.metaService.setTag('og:url', location.href);\r\n    this.metaService.setTag('og:image',this.item.image);\r\n    this.metaService.setTag('video:writer', this.item.creator);    \r\n\r\n    this.applyKeyword();\r\n    this.checkFavorite();\r\n    this.isChecked = false;\r\n    if(this.container) this.container.scrollTop = 48;    \r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/video/video-details.component.ts\n **/","export * from './video-relation-list.component';\r\nexport * from './video-card-list.component';\r\nexport * from './video-page.component';\r\n\r\nimport { VideoCardListComponent, VideoPageComponent } from './';\r\n\r\nexport const routes = { path: '', component: VideoPageComponent,\r\n  children: [\r\n    { path: '',                    pathMatch: 'full', \t\t\t\tcomponent: VideoCardListComponent },\r\n    { path: ':mode',             \t pathMatch: 'full', \t\t\t\tcomponent: VideoCardListComponent },\r\n    { path: 'keyword/:id/:title',  pathMatch: 'full', \t\t\t\tcomponent: VideoCardListComponent },\r\n    { path: 'search/:txtSearch',   pathMatch: 'full', \t\t\t\tcomponent: VideoCardListComponent }\r\n  ] \r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/index.ts\n **/","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ROUTER_DIRECTIVES } from '@angular/router';\r\nimport { SafeResourceUrl, DomSanitizationService } from '@angular/platform-browser';\r\n\r\nimport { VideoCard } from '../video.service';\r\nimport { HowlongPipe } from '../filter.pipe';\r\n\r\n@Component({\r\n    selector: 'video-card-item',\r\n    template: `\r\n    <a [routerLink]=\"['/detail', item._id, item.title0]\" class=\"nothing\">\r\n      <div class=\"mdl-card__title\">\r\n         <h4 class=\"mdl-card__title-text main-color\">{{item.title}}</h4>\r\n      </div>      \r\n      <div class=\"mdl-card__media\">\r\n        <img src=\"{{item.image}}\"                                 *ngIf=\"!item.youtubeid\">\r\n        <img src=\"http://i.ytimg.com/vi/{{item.youtubeid}}/mqdefault.jpg\" *ngIf=\"item.youtubeid\">\r\n      </div>\r\n      <div class=\"howlong\" *ngIf=\"item.duration\"><i class=\"material-icons dp48\">alarm</i>{{item.duration | HowlongPipe}}</div>\r\n      <div class=\"mdl-card__supporting-text icon-des mdl-grid des-color\">\r\n        <div class=\"mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone ellipsis-1\" title=\"{{item.creator}}\"><i class=\"material-icons dp48\">tag_faces</i> {{item.creator}}</div>\r\n        <div class=\"mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone ellipsis-1\" title=\"{{item.nowOnTime}}\"><i class=\"material-icons dp48\">alarm_on</i> {{item.nowOnTime}}</div>\r\n      </div>\r\n    </a>\r\n    `,\r\n    host: {\r\n      '[class.mdl-card]': 'true',\r\n      '[class.mdl-shadow--2dp]': 'true',\r\n      '[class.mdl-cell]': 'true',\r\n      '[class.mdl-cell--4-col]': 'true',\r\n      '[class.mdl-cell--4-col-tablet]': 'true',\r\n      '[class.mdl-cell--4-col-phone]': 'true'\r\n    },\r\n    pipes: [HowlongPipe],\r\n    directives: [ROUTER_DIRECTIVES]\r\n})\r\nexport class VideoCardItemComponent implements OnInit { \r\n  @Input() item: VideoCard;\r\n  url: SafeResourceUrl;\r\n\r\n  constructor(private sanitizer: DomSanitizationService){\r\n    \r\n  }\r\n\r\n  ngOnInit(){\r\n    this.url = this.sanitizer.bypassSecurityTrustUrl(this.item.image);   \r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-card-item.component.ts\n **/","import { Component, Input, OnInit, OnDestroy, OnChanges, SimpleChange, ComponentResolver, ViewContainerRef, ComponentFactory, ViewChild, ComponentRef, AfterViewInit } from '@angular/core';\r\nimport { ActivatedRoute, Router, ROUTER_DIRECTIVES } from '@angular/router';\r\nimport { MetaService } from 'ng2-meta';\r\n\r\nimport { EventService } from '../event.service';\r\nimport { VideoCard, VideoService } from '../video.service';\r\nimport { GoTop } from '../video.directive';\r\nimport { VideoCardItemComponent } from './video-card-item.component'\r\nimport { VideoCardLoadingComponent } from './video-card-loading.component'\r\n\r\ndeclare var componentHandler: any;\r\n\r\n@Component({\r\n    selector: 'video-card-list',\r\n    template: `\r\n      <div class=\"android-card-container mdl-grid\" id=\"mainContent0\">\r\n          <div #viewContainer></div>\r\n          <video-card-loading [hidden]=\"!isLoading\"></video-card-loading>\r\n      </div>      \r\n      <div *ngIf=\"isLastAutoScroll\" align=\"center\" class=\"isLastAutoScroll\">\r\n        <button class=\"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored\" [routerLink]=\"['/', mode]\" [queryParams]=\"{page: page+1}\" go-top>\r\n          <i class=\"normal material-icons\">hdr_weak</i>\r\n          <i class=\"hover material-icons\">hdr_strong</i>\r\n        </button>\r\n      </div>\r\n    `,\r\n    styles: [\r\n      'button { position: relative; margin-bottom: -90px; }', \r\n      'button i.hover { display: none; }',\r\n      'button:hover i.hover { display: block; }',\r\n      'button:hover i.normal { display: none; }'\r\n    ],\r\n    directives: [VideoCardItemComponent, VideoCardLoadingComponent, ROUTER_DIRECTIVES, GoTop]\r\n})\r\nexport class VideoCardListComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit { \r\n    isLoading: boolean = false;\r\n    isInit: boolean = false;\r\n    sub: any;\r\n    qsub: any;\r\n    gsub:any;\r\n    isLastAutoScroll: boolean = false;\r\n    initPage:number = 1;\r\n    mode: string;\r\n    query: any = {};\r\n    page: number = 1;\r\n    rows: number = 12;\r\n\r\n    @ViewChild('viewContainer', {read: ViewContainerRef}) \r\n    viewContainer:any;\r\n\r\n    constructor(private metaService: MetaService, private router: Router, private route: ActivatedRoute, private videoService: VideoService, private eventService: EventService, private cmpResolver: ComponentResolver){\r\n      \r\n    }\r\n\r\n    ngAfterViewInit() {            \r\n      componentHandler.upgradeDom();\r\n    }\r\n\r\n    ngOnChanges(changes: {[propertyName: string]: SimpleChange}){       \r\n      this.nextPage(this, () => {\r\n        this.eventService.emit({com: 'video-card-list', action: 'loaded'});\r\n      });\r\n    }\r\n\r\n    ngOnInit(){\r\n      this.gsub = this.eventService.emitter.subscribe((data: any) => {\r\n        if(data.com === 'video-card-list'){\r\n          if(data.action === 'append') {            \r\n            this.page++;\r\n            this.nextPage(this, () => {\r\n              this.eventService.emit({com: 'video-card-list', action: 'loaded'});\r\n              if(this.page > this.initPage && (this.page - this.initPage) % 2 === 0){\r\n                this.isLastAutoScroll = true;\r\n                return this.eventService.emit({com: 'video-card-list', action: 'stop'});\r\n              }              \r\n            });            \r\n          }\r\n        }\r\n      });\r\n      this.sub = this.route.params.subscribe((params: any) => {\r\n        var txtSearch: string = params['txtSearch'];      \r\n        var keywordId: string =  params['id'];        \r\n        var title: string;\r\n        if(txtSearch){\r\n          this.mode = 'search';\r\n          this.query.txtSearch = txtSearch;\r\n          title = txtSearch + '***';\r\n        }else if(keywordId){\r\n          this.mode = 'keyword';\r\n          this.query.keyword = keywordId;\r\n          var kwidx = this.videoService.keywords.findIndex((e) =>{ return e._id === keywordId; });\r\n          title = kwidx < 0 ? keywordId : this.videoService.keywords[kwidx].name;\r\n        }else {          \r\n          this.mode = params['mode'] || 'newest';          \r\n          if(this.mode === 'most'){\r\n            title = 'Clip xem nhiều nhất';\r\n          }else if(this.mode === 'hot'){\r\n            title = 'Clip HOT nhất';            \r\n          }\r\n        }\r\n        if(title) setTimeout(() => { this.metaService.setTitle(title); });\r\n        this.init();\r\n      });\r\n      this.qsub = this.router.routerState.queryParams.subscribe((params:any) => {\r\n        this.initPage = +params.page || 1;\r\n        this.page = this.initPage;\r\n        this.isLastAutoScroll = false;\r\n        this.init();\r\n      });\r\n    }\r\n\r\n    init() {\r\n      if(this.isInit) return;      \r\n      this.isInit = true;\r\n      setTimeout(() => {\r\n        this.clearContent(this);\r\n        this.eventService.emit({com: 'video-card-list', action: 'start'});\r\n        this.nextPage(this, () => {\r\n          this.isInit = false;\r\n          this.eventService.emit({com: 'video-card-list', action: 'loaded'});\r\n        });\r\n      }, 100);\r\n    }\r\n\r\n    ngOnDestroy(){\r\n      this.gsub.unsubscribe();\r\n      this.qsub.unsubscribe();\r\n      this.sub.unsubscribe();\r\n    }\r\n\r\n    nextPage(self:VideoCardListComponent, fcDone: any){\r\n      self.isLoading = true;\r\n      self.eventService.emit({com: 'page-loading', action: 1});\r\n      if(self.mode === 'most'){\r\n        self.videoService.getMostVideos({page: self.page, rows: self.rows}).subscribe((videos: Array<VideoCard>) => {\r\n          self.drawContent(self, videos, fcDone);\r\n        }, self.drawError);\r\n      }else if(self.mode === 'newest'){        \r\n        self.videoService.getNewestVideos({page: self.page, rows: self.rows}).subscribe((videos: Array<VideoCard>) => {\r\n          self.drawContent(self, videos, fcDone);\r\n        }, self.drawError);\r\n      }else if(self.mode === 'hot'){\r\n        self.videoService.getHotVideos({page: self.page, rows: self.rows}).subscribe((videos: Array<VideoCard>) => {\r\n          self.drawContent(self, videos, fcDone);\r\n        }, self.drawError);\r\n      }else if(self.mode === 'search'){\r\n        self.videoService.searchVideos(self.query.txtSearch, {page: self.page, rows: self.rows}).subscribe((videos: Array<VideoCard>) => {\r\n          self.drawContent(self, videos, fcDone);\r\n        }, self.drawError);\r\n      }else if(self.mode === 'keyword'){        \r\n        self.videoService.getKeywordVideos(self.query.keyword, {page: self.page, rows: self.rows}).subscribe((videos: Array<VideoCard>) => {\r\n          self.drawContent(self, videos, fcDone);\r\n        }, self.drawError);\r\n      }\r\n    }\r\n\r\n    drawError(err: any){\r\n      console.error(err);\r\n    }\r\n\r\n    clearContent(self: VideoCardListComponent){\r\n      self.viewContainer.clear();\r\n    }\r\n\r\n    drawContent(self: VideoCardListComponent, videos: Array<VideoCard>, fcDone: any){            \r\n      if(videos.length === 0) {\r\n        this.isLoading = undefined;\r\n        return fcDone();\r\n      }\r\n      self.cmpResolver.resolveComponent(VideoCardItemComponent)\r\n      .then((factory:ComponentFactory<VideoCardItemComponent>) => {\r\n        var index = self.viewContainer.length;\r\n        for(var i in videos){\r\n          var com: ComponentRef<VideoCardItemComponent> = self.viewContainer.createComponent(factory, index++, self.viewContainer.injector);\r\n          com.instance.item = videos[i];\r\n        }\r\n        self.isLoading = false;\r\n        self.eventService.emit({com: 'page-loading', action: 0});\r\n        fcDone();        \r\n      });      \r\n   }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-card-list.component.ts\n **/","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'video-card-loading',\r\n    template: `\r\n      <img src=\"/assets/img/loading.gif\" class=\"inner\" />\r\n    `,\r\n    host: {\r\n      '[class.mdl-card]': 'true',\r\n      '[class.mdl-cell]': 'true',\r\n      '[class.mdl-cell--4-col]': 'true',\r\n      '[class.mdl-cell--4-col-tablet]': 'true',\r\n      '[class.mdl-cell--4-col-phone]': 'true'\r\n    }\r\n})\r\nexport class VideoCardLoadingComponent { \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-card-loading.component.ts\n **/","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { CORE_DIRECTIVES } from '@angular/common';\r\nimport { ActivatedRoute, Router, ROUTER_DIRECTIVES } from '@angular/router';\r\n\r\nimport { VideoRelationListComponent } from './video-relation-list.component';\r\nimport { FacebookLikeComponent } from '../facebook.component';\r\nimport { UserFavoriteVideoComponent } from '../user/user-favorite-video.component'; \r\nimport { EventService } from '../event.service';\r\n\r\n@Component({\r\n    selector: 'video-page',\r\n    template: `\r\n      <div class=\"mdl-grid\">\r\n        <div class=\"mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\">                 \r\n          <router-outlet></router-outlet>\r\n        </div>\r\n        <div                class=\"mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--top\">\r\n          <facebook-like *xl class=\"mdl-card\"></facebook-like>\r\n          <br/>\r\n          <br/>\r\n          <div class=\"fixed-col\">\r\n            <user-favorite-video [rows]=\"3\"></user-favorite-video>\r\n            <br/>\r\n            <br/>\r\n            <video-relation-list [mode]=\"'most'\" [page]=\"1\" [rows]=\"8\"></video-relation-list>\r\n            <br/>\r\n            <br/>\r\n            <video-relation-list [mode]=\"'hot'\" [page]=\"1\" [rows]=\"8\"></video-relation-list>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `,\r\n    directives: [VideoRelationListComponent, FacebookLikeComponent, CORE_DIRECTIVES, ROUTER_DIRECTIVES, UserFavoriteVideoComponent]\r\n})\r\nexport class VideoPageComponent implements OnInit, OnDestroy { \r\n\r\n  constructor(private eventService: EventService){\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    \r\n  }\r\n\r\n  ngOnDestroy(){\r\n    this.eventService.emit({com: 'video-card-list', action: 'stop'});    \r\n  }\r\n\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-page.component.ts\n **/","import { Component, Input } from '@angular/core';\r\nimport { ROUTER_DIRECTIVES } from '@angular/router';\r\n\r\nimport { VideoCard } from '../video.service';\r\nimport { HowlongPipe } from '../filter.pipe';\r\n\r\n@Component({\r\n    selector: 'video-relation-item',\r\n    template: `\r\n      <li class=\"mdl-list__item mdl-list__item--three-line\">\r\n        <a class=\"mdl-list__item-primary-content nothing\" [routerLink]=\"['/detail', item._id, item.title0]\">          \r\n          <div class=\"img-des\">\r\n            <img src=\"{{item.image}}\" width=\"100\" class=\"rounded\" *ngIf=\"!item.youtubeid\">\r\n            <img src=\"http://i.ytimg.com/vi/{{item.youtubeid}}/1.jpg\" width=\"100\" style=\"float: left; margin-right: 5px;\" class=\"rounded\" *ngIf=\"item.youtubeid\">                    \r\n            <div class=\"howlong\"><i class=\"material-icons dp48\">alarm</i>{{item.duration | HowlongPipe}}</div>\r\n          </div>\r\n          <div class=\"main-color title\">{{item.title}}</div>\r\n          <span class=\"mdl-list__item-text-body des-color\">\r\n            <i class=\"material-icons dp48\">alarm_on</i> {{item.nowOnTime}}\r\n          </span>\r\n        </a>\r\n      </li>\r\n    `,\r\n    pipes: [HowlongPipe],\r\n    directives: [ROUTER_DIRECTIVES]\r\n})\r\nexport class VideoRelationItemComponent { \r\n  @Input() item: VideoCard;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-relation-item.component.ts\n **/","import { Component, Input, OnInit, OnChanges, SimpleChange } from '@angular/core';\r\n\r\nimport { VideoCard, VideoService } from '../video.service';\r\nimport { VideoRelationItemComponent } from './video-relation-item.component';\r\n\r\n@Component({\r\n    selector: 'video-relation-list',\r\n    template: `\r\n      <div class=\"mdl-card mdl-shadow--2dp\">\r\n        <div class=\"mdl-card__title mdl-card--border\">\r\n          <h6 class=\"mdl-card__title-text\">{{title}}</h6>\r\n          <div class=\"mdl-layout-spacer\"></div>\r\n          <i class=\"material-icons mdl-list__item-icon\">videocam</i>\r\n        </div>\r\n        <ul class=\"mdl-list\">\r\n          <video-relation-item style=\"width: 100%\" *ngFor=\"let v of videosRelation\" [item]=\"v\"></video-relation-item>\r\n        </ul>\r\n      </div>\r\n    `,\r\n    directives: [VideoRelationItemComponent]\r\n})\r\nexport class VideoRelationListComponent implements OnInit, OnChanges { \r\n  @Input() mode: string;\r\n  @Input() page: number;\r\n  @Input() rows: number;\r\n  @Input() query: any = {};\r\n\r\n  title: string;\r\n  videosRelation: VideoCard[] = [];\r\n  \r\n  constructor(private videoService: VideoService){\r\n    \r\n  }\r\n\r\n  ngOnChanges(changes: {[propertyName: string]: SimpleChange}){    \r\n    if(this.mode === 'relation'){      \r\n      this.title = 'Video liên quan';\r\n      this.videoService.getRelateVideos(this.query.id, this.query.keywords, this.query.updateat, {page: this.page, rows: this.rows}).subscribe(\r\n                       (videos: Array<VideoCard>) => {this.videosRelation = videos;},\r\n                       error =>  console.error(error));  \r\n    }\r\n  }\r\n\r\n  ngOnInit(){\r\n    if(this.mode === 'most'){\r\n      this.title = 'Video xem nhiều nhất';\r\n      this.videoService.getMostVideos({page: this.page, rows: this.rows}).subscribe(\r\n                       (videos: Array<VideoCard>) => {this.videosRelation = videos;},\r\n                       error =>  console.error(error));\r\n    }else if(this.mode === 'hot'){\r\n      this.title = 'Video hot';\r\n      this.videoService.getHotVideos({page: this.page, rows: this.rows}).subscribe(\r\n                       (videos: Array<VideoCard>) => {this.videosRelation = videos;},\r\n                       error =>  console.error(error));\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/videos/video-relation-list.component.ts\n **/"],"sourceRoot":""}